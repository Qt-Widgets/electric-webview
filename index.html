<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Instant-webview by gustavosbarreto</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Instant-webview</h1>
      <h2 class="project-tagline">Instant WebView is a web browser which has no UI controls</h2>
      <a href="https://github.com/gustavosbarreto/instant-webview" class="btn">View on GitHub</a>
      <a href="https://github.com/gustavosbarreto/instant-webview/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/gustavosbarreto/instant-webview/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introduction</h1>

<p><a href="https://travis-ci.org/gustavosbarreto/instant-webview"><img src="https://travis-ci.org/gustavosbarreto/instant-webview.svg?branch=master" alt="Build Status"></a></p>

<p>Instant WebView is a web browser which has no UI controls. You can interact with
them through inter-process communication (IPC).</p>

<p>Currently, we support the following IPC transport layers:</p>

<ul>
<li>TCP</li>
<li>Unix Socket</li>
<li>WebSocket</li>
</ul>

<p>You can implement another IPC transport layer inheriting the
<code>IpcTransportLayer</code> abstract class. See the existing IPC transport
implementations to get some clue.</p>

<h1>
<a id="use-cases" class="anchor" href="#use-cases" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Use Cases</h1>

<ul>
<li>Web testing

<ul>
<li>Browser automated testing done easy.</li>
</ul>
</li>
<li>Page automation

<ul>
<li>Access and manipulate web pages using DOM API.</li>
</ul>
</li>
<li>Digital Signage

<ul>
<li>Display Web content without distractions.</li>
</ul>
</li>
<li>Kiosk Web Browser

<ul>
<li>The users can only interact with a single web application.</li>
</ul>
</li>
</ul>

<h1>
<a id="reverse-ipc" class="anchor" href="#reverse-ipc" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reverse IPC</h1>

<p>With reverse IPC, the Instant WebView accept commands from remote IPC server
instead of accepting commands from IPC clients. This is useful for controlling
the browser remotely. To enable reverse IPC pass <code>"--reverse"</code> in the cmdline.</p>

<h1>
<a id="building" class="anchor" href="#building" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Building</h1>

<p>Before building Instant WebView you need Qt and QtWebEngine 5.6 installed on the system.</p>

<pre><code>$ qmake PREFIX=/usr
$ make
$ make install
</code></pre>

<h1>
<a id="running" class="anchor" href="#running" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running</h1>

<p>To run Instant WebView you need to choose which IPC transport layer should be used
by IPC mechanism, use the <code>--transport</code> option to that.</p>

<p>Example:</p>

<pre><code>$ instant-webview --transport unixsocket
$ echo -e "open maximized\nload http://google.com" | socat - unix-connect:/tmp/instant-webview
</code></pre>

<h1>
<a id="commands" class="anchor" href="#commands" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Commands</h1>

<p>Instant WebView will read commands via TCP, Unix Socket or WebSocket. Each command command
starts with the name of a command and is terminated by a newline. Empty line are interpreted
as end of connection.</p>

<h2>
<a id="navigation" class="anchor" href="#navigation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Navigation</h2>

<ul>
<li>
<p><code>load &lt;URL&gt;</code></p>

<ul>
<li>Loads the specified <code>URL</code>.</li>
</ul>
</li>
<li>
<p><code>stop</code></p>

<ul>
<li>Stops loading the document.</li>
</ul>
</li>
<li>
<p><code>reload</code></p>

<ul>
<li>Reloads the current document.</li>
</ul>
</li>
<li>
<p><code>back</code></p>

<ul>
<li>Loads the previous document in the list of documents built by navigating links.</li>
</ul>
</li>
<li>
<p><code>forward</code></p>

<ul>
<li>Loads the next document in the list of documents built by navigating links.</li>
</ul>
</li>
</ul>

<h2>
<a id="window" class="anchor" href="#window" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Window</h2>

<ul>
<li>
<p><code>open &lt;maximized|fullscreen&gt;</code></p>

<ul>
<li>Open the window. If <code>maximized</code> is given, the window is open in maximized
state, otherwise <code>fullscreen</code> is given, the window is open in fullscreen mode.</li>
</ul>
</li>
<li>
<p><code>close</code></p>

<ul>
<li>Closes the window.</li>
</ul>
</li>
</ul>

<h2>
<a id="page" class="anchor" href="#page" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Page</h2>

<ul>
<li>
<code>current_url</code>

<ul>
<li>Returns the URL of the web page currently viewed.</li>
</ul>
</li>
<li>
<code>current_title</code>

<ul>
<li>Returns the title of the web page currently viewed.</li>
</ul>
</li>
<li>
<code>screenshot [REGION]</code>

<ul>
<li>Take a screenshot of the web page currenly viewed and send base64 encoded JPG.
If <code>[REGION]</code> is given, restrict the screenshot by the given region <code>(x,y,width,height)</code>.</li>
</ul>
</li>
</ul>

<h2>
<a id="content" class="anchor" href="#content" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Content</h2>

<ul>
<li>
<p><code>set_html &lt;string|file&gt; &lt;VALUE&gt;</code></p>

<ul>
<li>Sets the content of the web page. If <code>file</code> is given, the <code>VALUE</code>
is interpreted as a path to a file to load, otherwise <code>string</code> is given,
the <code>VALUE</code> is used to set the content of the web page.</li>
</ul>
</li>
<li>
<p><code>js &lt;string|file&gt; &lt;VALUE&gt;</code></p>

<ul>
<li>Run JavaScript code. If <code>file</code> is given, the <code>VALUE</code> is interpreted as
a path to a file to load, otherwise <code>string</code> is given, the value <code>VALUE</code>
is executed as JavaScript code.</li>
</ul>
</li>
</ul>

<h2>
<a id="events" class="anchor" href="#events" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Events</h2>

<ul>
<li>
<code>subscribe &lt;VALUE&gt;</code>

<ul>
<li>Subscribe to specified event in <code>VALUE</code>. If <code>VALUE</code> starts with <code>@</code> the
subscription is marked as single-shot.</li>
</ul>
</li>
</ul>

<h3>
<a id="single-shot-event-subscription" class="anchor" href="#single-shot-event-subscription" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Single-shot event subscription</h3>

<p>The single-shot event subscription might be used to wait until an event is fired.</p>

<h3>
<a id="available-events" class="anchor" href="#available-events" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Available events</h3>

<ul>
<li>
<code>url_changed</code>

<ul>
<li>This event is fired when the url chages.</li>
</ul>
</li>
<li>
<code>title_changed</code>

<ul>
<li>This event is fired whenever the title changes.</li>
</ul>
</li>
<li>
<code>load_started</code>

<ul>
<li>This event is fired when a page starts loading content.</li>
</ul>
</li>
<li>
<code>load_finished</code>

<ul>
<li>This event is fired when a load of the page has finished.</li>
</ul>
</li>
</ul>

<h1>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Examples</h1>

<p><strong>Basic Example</strong></p>

<p>Open a maximized window and load google.com:</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>open maximized<span class="pl-pds">"</span></span> <span class="pl-k">|</span> nc -U /tmp/instant-webview
<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>load http://google.com<span class="pl-pds">"</span></span> <span class="pl-k">|</span> nc -U /tmp/instant-webview</pre></div>

<p><strong>Screenshot Example</strong></p>

<p>Open a maximized window, load google.com and wait until load is finished
to take a screenshot:</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>open maximized<span class="pl-pds">"</span></span> <span class="pl-k">|</span> nc -U /tmp/instant-webview
<span class="pl-c1">echo</span> -e <span class="pl-s"><span class="pl-pds">"</span>subscribe @load_finished\nload http://google.com<span class="pl-pds">"</span></span> <span class="pl-k">|</span> nc -q -1 -U /tmp/instant-webview
<span class="pl-c1">echo</span> -e <span class="pl-s"><span class="pl-pds">"</span>screenshot\n<span class="pl-pds">"</span></span> <span class="pl-k">|</span> nc -U /tmp/instant-webview <span class="pl-k">|</span> base64 --decode <span class="pl-k">&gt;</span> screenshot.jpg</pre></div>

<p><strong>Browser History Example</strong></p>

<p>Open a maximized window, subscribe to url_changed event, wait until it
is fired then append the URL to /tmp/history.txt</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>open maximized<span class="pl-pds">"</span></span> <span class="pl-k">|</span> nc -U /tmp/instant-webview
<span class="pl-k">while</span> <span class="pl-c1">true</span><span class="pl-k">;</span> <span class="pl-k">do</span>
  URL=<span class="pl-s"><span class="pl-pds">$(</span><span class="pl-c1">echo</span> -e <span class="pl-s"><span class="pl-pds">"</span>subscribe @url_changed<span class="pl-pds">"</span></span> <span class="pl-k">|</span> nc -q -1 -U /tmp/instant-webview<span class="pl-pds">)</span></span>
  <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$URL</span><span class="pl-pds">"</span></span> <span class="pl-k">&gt;&gt;</span> /tmp/history.txt
<span class="pl-k">done</span></pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/gustavosbarreto/instant-webview">Instant-webview</a> is maintained by <a href="https://github.com/gustavosbarreto">gustavosbarreto</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
